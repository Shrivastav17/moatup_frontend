import React, { useState } from 'react'
import Corporate_Header from '../Corporate_Header/Corporate_Header'
import "./SendMaterial.css"
export default function SendMaterial() {

  const [formData, setFormData] = useState({
    eventName: "",
    eventDate: "",
    eventTime: "",
    eventPlace: "",
    emails: "",
    inviteFile: null,
    databaseFile: null,
    message: "",
  });

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData({ ...formData, [name]: value });
  };

  const handleFileChange = (e) => {
    const { name, files } = e.target;
    setFormData({ ...formData, [name]: files[0] });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();

    try {
      const formDataToSend = new FormData();
      formDataToSend.append("eventName", formData.eventName);
      formDataToSend.append("eventDate", formData.eventDate);
      formDataToSend.append("eventTime", formData.eventTime);
      formDataToSend.append("eventPlace", formData.eventPlace);
      formDataToSend.append("emails", formData.emails);
      formDataToSend.append("message", formData.message);

      // Append the invite file
      if (formData.inviteFile) {
        formDataToSend.append("inviteFile", formData.inviteFile);
      }

      // Append the database file if exists
      if (formData.databaseFile) {
        formDataToSend.append("databaseFile", formData.databaseFile);
      }
      console.log(formDataToSend);

      // Send the data using fetch
      const response = await fetch("http://localhost:9000/inviteInvestor", {
        method: "POST",
        body: formDataToSend,
      });

      const data = await response.json();
      console.log(data);

      if (response.ok) {
        alert(data.message);
      } else {
        console.error("Error submitting the form:", data);
        alert(data.message || "Failed to send the invitation. Please try again.");
      }
    } catch (error) {
      console.error("Error submitting the form:", error);
      alert("Failed to send the invitation. Please try again.");
    }
  };


  return (
    <>
      <Corporate_Header />

      <div className="send-material-form-container">
        <h2>Send Material</h2>
        <h3>Send Material </h3>
        <p>150 Contacts selected</p>

        <form onSubmit={handleSubmit} className="send-material-form">
          <div className="form-row">
            <div className="form-group1">
              <select name="eventType" onChange={handleChange} required>
                <option value="">Select Event Type</option>

              </select>
            </div>

            <div className="form-group2">
              <select name="year" onChange={handleChange} required>
                <option value="">Select Year</option>

              </select>
            </div>

            <div className="form-group3">
              <select name="quarter" onChange={handleChange} required>
                <option value="">Select Quarter</option>

              </select>
            </div>
          </div>



          <div className="form-group5 file-upload">
            <label htmlFor="materialFile" className="file-label">
              <svg width="253" height="36" viewBox="0 0 253 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="253" height="36" rx="18" fill="#009E94" />
                <path d="M32.63 22H33.974L30.46 12.298H28.99L25.462 22H26.806L27.59 19.83H31.846L32.63 22ZM31.482 18.794H27.954L29.718 13.866L31.482 18.794ZM35.7916 19.9C35.7916 21.44 36.5616 22 37.9196 22H39.0676V20.922H38.1296C37.3456 20.922 37.0656 20.656 37.0656 19.9V15.378H39.0676V14.328H37.0656V12.396H35.7916V14.328H34.7976V15.378H35.7916V19.9ZM40.8912 19.9C40.8912 21.44 41.6612 22 43.0192 22H44.1672V20.922H43.2292C42.4452 20.922 42.1652 20.656 42.1652 19.9V15.378H44.1672V14.328H42.1652V12.396H40.8912V14.328H39.8972V15.378H40.8912V19.9ZM45.2348 18.136C45.2348 20.516 46.8168 22.126 48.8608 22.126C50.2748 22.126 51.2688 21.398 51.7308 20.572V22H53.0188V14.328H51.7308V15.728C51.2828 14.93 50.3028 14.202 48.8748 14.202C46.8168 14.202 45.2348 15.742 45.2348 18.136ZM51.7308 18.15C51.7308 19.956 50.5268 21.006 49.1268 21.006C47.7268 21.006 46.5368 19.942 46.5368 18.136C46.5368 16.33 47.7268 15.308 49.1268 15.308C50.5268 15.308 51.7308 16.372 51.7308 18.15ZM54.6958 18.15C54.6958 20.586 56.2498 22.126 58.4338 22.126C60.3378 22.126 61.5838 21.062 61.9758 19.536H60.6038C60.3238 20.502 59.5678 21.048 58.4338 21.048C57.0338 21.048 55.9978 20.054 55.9978 18.15C55.9978 16.274 57.0338 15.28 58.4338 15.28C59.5678 15.28 60.3378 15.868 60.6038 16.792H61.9758C61.5838 15.182 60.3378 14.202 58.4338 14.202C56.2498 14.202 54.6958 15.742 54.6958 18.15ZM63.6757 22H64.9497V17.758C64.9497 16.106 65.8457 15.294 67.1477 15.294C68.4357 15.294 69.2897 16.092 69.2897 17.66V22H70.5497V17.478C70.5497 15.28 69.1917 14.188 67.4837 14.188C66.4057 14.188 65.4537 14.622 64.9497 15.434V11.64H63.6757V22ZM79.4012 12.242H76.3632V22H79.4012C82.6072 22 84.5812 20.166 84.5812 17.142C84.5812 14.118 82.6072 12.242 79.4012 12.242ZM77.6372 20.95V13.278H79.4012C81.9492 13.278 83.2792 14.762 83.2792 17.142C83.2792 19.522 81.9492 20.95 79.4012 20.95H77.6372ZM93.5416 18.15C93.5416 15.728 91.8476 14.202 89.6636 14.202C87.4936 14.202 85.7856 15.728 85.7856 18.15C85.7856 20.586 87.4376 22.126 89.6076 22.126C91.7916 22.126 93.5416 20.586 93.5416 18.15ZM87.0876 18.15C87.0876 16.218 88.3056 15.308 89.6496 15.308C90.9656 15.308 92.2396 16.218 92.2396 18.15C92.2396 20.096 90.9376 21.006 89.6076 21.006C88.2776 21.006 87.0876 20.096 87.0876 18.15ZM94.7407 18.15C94.7407 20.586 96.2947 22.126 98.4787 22.126C100.383 22.126 101.629 21.062 102.021 19.536H100.649C100.369 20.502 99.6127 21.048 98.4787 21.048C97.0787 21.048 96.0427 20.054 96.0427 18.15C96.0427 16.274 97.0787 15.28 98.4787 15.28C99.6127 15.28 100.383 15.868 100.649 16.792H102.021C101.629 15.182 100.383 14.202 98.4787 14.202C96.2947 14.202 94.7407 15.742 94.7407 18.15ZM110.525 14.328H109.251V18.542C109.251 20.194 108.369 21.006 107.053 21.006C105.765 21.006 104.911 20.208 104.911 18.654V14.328H103.651V18.822C103.651 21.02 105.037 22.112 106.801 22.112C107.823 22.112 108.761 21.664 109.251 20.866V22H110.525V14.328ZM123.75 22H125.01V17.478C125.01 15.28 123.652 14.188 121.902 14.188C120.726 14.188 119.634 14.79 119.186 15.896C118.682 14.748 117.632 14.188 116.372 14.188C115.364 14.188 114.454 14.622 113.95 15.434V14.328H112.676V22H113.95V17.772C113.95 16.12 114.832 15.294 116.12 15.294C117.38 15.294 118.22 16.092 118.22 17.66V22H119.48V17.772C119.48 16.12 120.362 15.294 121.65 15.294C122.91 15.294 123.75 16.092 123.75 17.66V22ZM130.361 15.28C131.677 15.28 132.797 16.106 132.783 17.604H127.939C128.079 16.106 129.115 15.28 130.361 15.28ZM133.945 19.634H132.573C132.293 20.46 131.565 21.048 130.417 21.048C129.115 21.048 128.023 20.194 127.925 18.64H134.057C134.085 18.374 134.099 18.15 134.099 17.87C134.099 15.77 132.643 14.202 130.417 14.202C128.177 14.202 126.623 15.728 126.623 18.15C126.623 20.586 128.233 22.126 130.417 22.126C132.321 22.126 133.553 21.034 133.945 19.634ZM141.395 22H142.655V17.478C142.655 15.28 141.297 14.188 139.519 14.188C138.483 14.188 137.559 14.622 137.055 15.42V14.328H135.781V22H137.055V17.758C137.055 16.106 137.951 15.294 139.253 15.294C140.541 15.294 141.395 16.092 141.395 17.66V22ZM145.016 19.9C145.016 21.44 145.786 22 147.144 22H148.292V20.922H147.354C146.57 20.922 146.29 20.656 146.29 19.9V15.378H148.292V14.328H146.29V12.396H145.016V14.328H144.022V15.378H145.016V19.9ZM155.352 19.914C155.296 17.17 150.844 18.164 150.844 16.344C150.844 15.728 151.404 15.28 152.342 15.28C153.364 15.28 153.952 15.84 154.008 16.61H155.282C155.198 15.112 154.078 14.202 152.384 14.202C150.676 14.202 149.57 15.168 149.57 16.344C149.57 19.2 154.106 18.206 154.106 19.914C154.106 20.544 153.546 21.048 152.538 21.048C151.46 21.048 150.802 20.488 150.732 19.746H149.416C149.5 21.146 150.76 22.126 152.552 22.126C154.246 22.126 155.352 21.174 155.352 19.914Z" fill="white" />
                <circle cx="229.5" cy="17.5" r="14.5" fill="white" fill-opacity="0.19" />
                <path d="M237.867 16.7343L230.208 25.1708C229.27 26.2043 227.998 26.7849 226.671 26.7849C225.344 26.7849 224.072 26.2043 223.133 25.1708C222.195 24.1372 221.668 22.7354 221.668 21.2738C221.668 19.8122 222.195 18.4104 223.133 17.3769L230.792 8.94037C231.417 8.25135 232.265 7.86426 233.15 7.86426C234.035 7.86426 234.883 8.25135 235.508 8.94037C236.134 9.62939 236.485 10.5639 236.485 11.5383C236.485 12.5128 236.134 13.4473 235.508 14.1363L227.842 22.5728C227.529 22.9173 227.105 23.1108 226.663 23.1108C226.22 23.1108 225.796 22.9173 225.483 22.5728C225.171 22.2283 224.995 21.761 224.995 21.2738C224.995 20.7866 225.171 20.3193 225.483 19.9748L232.558 12.1901" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </label>
            <input
              type="file"
              id="materialFile"
              name="materialFile"
              onChange={handleFileChange}
              className="file-input"
            />
            {formData.materialFile && (
              <p className="file-name">{formData.materialFile.name}</p>
            )}
          </div>

          <hr className="form-divider" />

          <div className="form-group6">
            <input
              type="text"
              name="emails"
              value={formData.emails}
              onChange={handleChange}
              placeholder="Enter multiple emails separated by commas"
              required
            />
          </div>

          <div className="form-group7 file-upload">
            <label htmlFor="databaseFile" className="file-label1">
              <svg width="253" height="36" viewBox="0 0 253 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="253" height="36" rx="18" fill="#009E94" />
                <path d="M32.63 22H33.974L30.46 12.298H28.99L25.462 22H26.806L27.59 19.83H31.846L32.63 22ZM31.482 18.794H27.954L29.718 13.866L31.482 18.794ZM35.7916 19.9C35.7916 21.44 36.5616 22 37.9196 22H39.0676V20.922H38.1296C37.3456 20.922 37.0656 20.656 37.0656 19.9V15.378H39.0676V14.328H37.0656V12.396H35.7916V14.328H34.7976V15.378H35.7916V19.9ZM40.8912 19.9C40.8912 21.44 41.6612 22 43.0192 22H44.1672V20.922H43.2292C42.4452 20.922 42.1652 20.656 42.1652 19.9V15.378H44.1672V14.328H42.1652V12.396H40.8912V14.328H39.8972V15.378H40.8912V19.9ZM45.2348 18.136C45.2348 20.516 46.8168 22.126 48.8608 22.126C50.2748 22.126 51.2688 21.398 51.7308 20.572V22H53.0188V14.328H51.7308V15.728C51.2828 14.93 50.3028 14.202 48.8748 14.202C46.8168 14.202 45.2348 15.742 45.2348 18.136ZM51.7308 18.15C51.7308 19.956 50.5268 21.006 49.1268 21.006C47.7268 21.006 46.5368 19.942 46.5368 18.136C46.5368 16.33 47.7268 15.308 49.1268 15.308C50.5268 15.308 51.7308 16.372 51.7308 18.15ZM54.6958 18.15C54.6958 20.586 56.2498 22.126 58.4338 22.126C60.3378 22.126 61.5838 21.062 61.9758 19.536H60.6038C60.3238 20.502 59.5678 21.048 58.4338 21.048C57.0338 21.048 55.9978 20.054 55.9978 18.15C55.9978 16.274 57.0338 15.28 58.4338 15.28C59.5678 15.28 60.3378 15.868 60.6038 16.792H61.9758C61.5838 15.182 60.3378 14.202 58.4338 14.202C56.2498 14.202 54.6958 15.742 54.6958 18.15ZM63.6757 22H64.9497V17.758C64.9497 16.106 65.8457 15.294 67.1477 15.294C68.4357 15.294 69.2897 16.092 69.2897 17.66V22H70.5497V17.478C70.5497 15.28 69.1917 14.188 67.4837 14.188C66.4057 14.188 65.4537 14.622 64.9497 15.434V11.64H63.6757V22ZM79.4012 12.242H76.3632V22H79.4012C82.6072 22 84.5812 20.166 84.5812 17.142C84.5812 14.118 82.6072 12.242 79.4012 12.242ZM77.6372 20.95V13.278H79.4012C81.9492 13.278 83.2792 14.762 83.2792 17.142C83.2792 19.522 81.9492 20.95 79.4012 20.95H77.6372ZM85.7856 18.136C85.7856 20.516 87.3676 22.126 89.4116 22.126C90.8256 22.126 91.8196 21.398 92.2816 20.572V22H93.5696V14.328H92.2816V15.728C91.8336 14.93 90.8536 14.202 89.4256 14.202C87.3676 14.202 85.7856 15.742 85.7856 18.136ZM92.2816 18.15C92.2816 19.956 91.0776 21.006 89.6776 21.006C88.2776 21.006 87.0876 19.942 87.0876 18.136C87.0876 16.33 88.2776 15.308 89.6776 15.308C91.0776 15.308 92.2816 16.372 92.2816 18.15ZM96.0025 19.9C96.0025 21.44 96.7725 22 98.1305 22H99.2785V20.922H98.3405C97.5565 20.922 97.2765 20.656 97.2765 19.9V15.378H99.2785V14.328H97.2765V12.396H96.0025V14.328H95.0085V15.378H96.0025V19.9ZM100.346 18.136C100.346 20.516 101.928 22.126 103.972 22.126C105.386 22.126 106.38 21.398 106.842 20.572V22H108.13V14.328H106.842V15.728C106.394 14.93 105.414 14.202 103.986 14.202C101.928 14.202 100.346 15.742 100.346 18.136ZM106.842 18.15C106.842 19.956 105.638 21.006 104.238 21.006C102.838 21.006 101.648 19.942 101.648 18.136C101.648 16.33 102.838 15.308 104.238 15.308C105.638 15.308 106.842 16.372 106.842 18.15ZM111.557 15.756V11.64H110.283V22H111.557V20.586C112.033 21.426 113.027 22.126 114.427 22.126C116.485 22.126 118.067 20.516 118.067 18.136C118.067 15.742 116.499 14.202 114.427 14.202C113.069 14.202 112.047 14.902 111.557 15.756ZM116.765 18.136C116.765 19.942 115.575 21.006 114.161 21.006C112.775 21.006 111.557 19.956 111.557 18.15C111.557 16.372 112.775 15.308 114.161 15.308C115.575 15.308 116.765 16.33 116.765 18.136ZM119.268 18.136C119.268 20.516 120.85 22.126 122.894 22.126C124.308 22.126 125.302 21.398 125.764 20.572V22H127.052V14.328H125.764V15.728C125.316 14.93 124.336 14.202 122.908 14.202C120.85 14.202 119.268 15.742 119.268 18.136ZM125.764 18.15C125.764 19.956 124.56 21.006 123.16 21.006C121.76 21.006 120.57 19.942 120.57 18.136C120.57 16.33 121.76 15.308 123.16 15.308C124.56 15.308 125.764 16.372 125.764 18.15ZM134.721 19.914C134.665 17.17 130.213 18.164 130.213 16.344C130.213 15.728 130.773 15.28 131.711 15.28C132.733 15.28 133.321 15.84 133.377 16.61H134.651C134.567 15.112 133.447 14.202 131.753 14.202C130.045 14.202 128.939 15.168 128.939 16.344C128.939 19.2 133.475 18.206 133.475 19.914C133.475 20.544 132.915 21.048 131.907 21.048C130.829 21.048 130.171 20.488 130.101 19.746H128.785C128.869 21.146 130.129 22.126 131.921 22.126C133.615 22.126 134.721 21.174 134.721 19.914ZM139.781 15.28C141.097 15.28 142.217 16.106 142.203 17.604H137.359C137.499 16.106 138.535 15.28 139.781 15.28ZM143.365 19.634H141.993C141.713 20.46 140.985 21.048 139.837 21.048C138.535 21.048 137.443 20.194 137.345 18.64H143.477C143.505 18.374 143.519 18.15 143.519 17.87C143.519 15.77 142.063 14.202 139.837 14.202C137.597 14.202 136.043 15.728 136.043 18.15C136.043 20.586 137.653 22.126 139.837 22.126C141.741 22.126 142.973 21.034 143.365 19.634Z" fill="white" />
                <circle cx="229.5" cy="17.5" r="14.5" fill="white" fill-opacity="0.19" />
                <path d="M237.867 16.6337L230.208 25.0702C229.27 26.1037 227.998 26.6844 226.671 26.6844C225.344 26.6844 224.072 26.1037 223.133 25.0702C222.195 24.0367 221.668 22.6349 221.668 21.1732C221.668 19.7116 222.195 18.3098 223.133 17.2763L230.792 8.83978C231.417 8.15076 232.265 7.76367 233.15 7.76367C234.035 7.76367 234.883 8.15076 235.508 8.83978C236.134 9.52881 236.485 10.4633 236.485 11.4378C236.485 12.4122 236.134 13.3467 235.508 14.0357L227.842 22.4722C227.529 22.8167 227.105 23.0103 226.663 23.0103C226.22 23.0103 225.796 22.8167 225.483 22.4722C225.171 22.1277 224.995 21.6605 224.995 21.1732C224.995 20.686 225.171 20.2188 225.483 19.8743L232.558 12.0895" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>

            </label>
            <input
              type="file"
              id="databaseFile"
              name="databaseFile"
              onChange={handleFileChange}
              className="file-input1"
            />
          </div>

          <div className="form-group8">
            {/* <label>Message:</label> */}
            <textarea
              name="message"
              value={formData.message}
              onChange={handleChange}
              rows="4"
              placeholder="Message"
              required
            ></textarea>
          </div>

          <button type="submit" className="submit-button">Send Material</button>
        </form>
      </div>


    </>
  )
}
